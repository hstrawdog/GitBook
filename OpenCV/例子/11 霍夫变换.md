## 霍夫直线变换

- Api 
  
  ```
  lines=cv2.HoughLines（image,rho,theta,threshold）
  ```
  
  - image 是输入图像，即源图像，必须是 8 位的单通道[二值图像](https://so.csdn.net/so/search?q=二值图像&spm=1001.2101.3001.7020)。如果是其他类型的图像，在进行霍夫变换之前，需要将其修改为指定格式。
  - rho 为以像素为单位的距离 r 的精度。一般情况下，使用的精度是 1。
  - theta 为角度 θ 的精度。一般情况下，使用的精度是 π/180，表示要搜索所有可能的角度。
  - threshold  是阈值。该值越小，判定出的直线就越多。通过上一节的分析可知，识别直线时，要判定有多少个点位于该直线上。在判定直线是否存在时，对直线所穿过的点的数量进行评估，如果直线所穿过的点的数量小于阈值，则认为这些点恰好（偶然）在算法上构成直线，但是在源图像中该直线并不存在；如果大于阈值，则认为直线存在。所以，如果阈值较小，就会得到较多的直线；阈值较大，就会得到较少的直线
  - 返回值 lines 中的每个元素都是一对浮点数，表示检测到的直线的参数，即（r,θ），是 numpy.ndarray 类型。
  
- 例子

  ```
  import numpy as
  np
  import  cv2 as cv 
  import matplotlib.pylab as plt
  
  # 加载图  
  img = cv.imread("image/rili.jpg")
  # Canny 边缘检测 并二值化
  edges =cv.Canny(img, 50 ,150)
  # 霍夫直线变换
  lines =cv.HoughLines(edges,0.8,np.pi/180,150)
  # 迭代出线条 绘制到 img 中
  for line in lines:
      rho,theta = line[0]
      a = np.cos(theta)
      b = np.sin(theta)
      x0 = rho*a
      y0 = rho*b
      x1 = int(x0+1000*(-b))
      y1 = int(y0+1000*a)
      x2 = int(x0-1000*(-b))
      y2=int(y0-1000*a)
      cv.line(img,(x1,y1),(x2,y2),(0,255,0))
  ```


## HoughLinesP 



## 霍夫圆

- api 

  ```
  circles = cv.HoughCircles(image, method, dp, minDist, param1=100, param2=100, minRadius=0,maxRadius=0 )
  
  ```

- 参数：

  - image：输入图像，应输入灰度图像
  - method：使用霍夫变换圆检测的算法，它的参数是CV_HOUGH_GRADIENT
  - dp：霍夫空间的分辨率，dp=1时表示霍夫空间与输入图像空间的大小一致，dp=2时霍夫空间是输入图像空间的一半，以此类推
  - minDist为圆心之间的最小距离，如果检测到的两个圆心之间距离小于该值，则认为它们是同一个圆心
  - param1：边缘检测时使用Canny算子的高阈值，低阈值是高阈值的一半。
  - param2：检测圆心和确定半径时所共有的阈值
  - minRadius和maxRadius为所检测到的圆半径的最小值和最大值

- 返回：

  - circles：输出圆向量，包括三个浮点型的元素——圆心横坐标，圆心纵坐标和圆半径

  
  
- 例子
  
  ```
  star = cv.imread("image/star.jpeg")
  gray_img =cv.cvtColor(star,cv.COLOR_BGR2GRAY)
  img = cv.medianBlur(gray_img,7)
   circles = cv.HoughCircles(img,cv.HOUGH_GRADIENT,1,200,param1=100,param2=50,minRadius=0,maxRadius=100)
  for i in circles[0,:]:
        cv.circle(star,(int( i[0]),int (i[1])),int (i[2]),(0,255,0),2)
        cv.circle(star,(int (i[0]),int (i[1])),2,(255,0,0),5)
  plt.imshow(star[:,:,::-1])
  ```

